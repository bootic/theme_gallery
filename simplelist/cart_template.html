<style>
  /* Cart
-----------------------*/
.add_to_cart .loading { display: none; }
.add_to_cart.bootic_cart_adding .loading { display: inline-block; }
  
.ajax_cart {
  margin-right: 18px;
  margin-bottom: 20px;
  display: none;
  position: relative;
}
.loading {
  background-image: url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPj4+Dg4OISEhAYGBiYmJtbW1qioqBYWFnZ2dmZmZuTk5JiYmMbGxkhISFZWVgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFUCAgjmRpnqUwFGwhKoRgqq2YFMaRGjWA8AbZiIBbjQQ8AmmFUJEQhQGJhaKOrCksgEla+KIkYvC6SJKQOISoNSYdeIk1ayA8ExTyeR3F749CACH5BAkKAAAALAAAAAAQABAAAAVoICCKR9KMaCoaxeCoqEAkRX3AwMHWxQIIjJSAZWgUEgzBwCBAEQpMwIDwY1FHgwJCtOW2UDWYIDyqNVVkUbYr6CK+o2eUMKgWrqKhj0FrEM8jQQALPFA3MAc8CQSAMA5ZBjgqDQmHIyEAIfkECQoAAAAsAAAAABAAEAAABWAgII4j85Ao2hRIKgrEUBQJLaSHMe8zgQo6Q8sxS7RIhILhBkgumCTZsXkACBC+0cwF2GoLLoFXREDcDlkAojBICRaFLDCOQtQKjmsQSubtDFU/NXcDBHwkaw1cKQ8MiyEAIfkECQoAAAAsAAAAABAAEAAABVIgII5kaZ6AIJQCMRTFQKiDQx4GrBfGa4uCnAEhQuRgPwCBtwK+kCNFgjh6QlFYgGO7baJ2CxIioSDpwqNggWCGDVVGphly3BkOpXDrKfNm/4AhACH5BAkKAAAALAAAAAAQABAAAAVgICCOZGmeqEAMRTEQwskYbV0Yx7kYSIzQhtgoBxCKBDQCIOcoLBimRiFhSABYU5gIgW01pLUBYkRItAYAqrlhYiwKjiWAcDMWY8QjsCf4DewiBzQ2N1AmKlgvgCiMjSQhACH5BAkKAAAALAAAAAAQABAAAAVfICCOZGmeqEgUxUAIpkA0AMKyxkEiSZEIsJqhYAg+boUFSTAkiBiNHks3sg1ILAfBiS10gyqCg0UaFBCkwy3RYKiIYMAC+RAxiQgYsJdAjw5DN2gILzEEZgVcKYuMJiEAOwAAAAAAAAAAAA==);
  background-position: left top;
  background-repeat: no-repeat;
  width: 16px;
  height: 16px;
  display: inline-block;
  text-indent: -200px;
  outline: none;
  overflow: hidden; 
}
.ajax_cart .free_shipping {
  background: #DCE2D7;
  font-weight: bold;
  color: black;
  text-align: center;
  margin-bottom: 0;
}
.ajax_cart input.bootic_button {
  width: 100%;
  margin: 0; 
}
.ajax_cart .promo strong { color: black; }
.ajax_cart .loading {
  position: absolute;
  top: 5px;
  right: 5px;
}
.ajax_cart h3 {
  background-position: left top;
  background-repeat: no-repeat;
  background-image: url(data:image/png;base64,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);
  padding: 6px 0 6px 34px
}
.ajax_cart form {
  text-align: center; 
}
.ajax_cart .no_items {
  margin: 0;
  padding: 10px 0;
  border: dotted silver 1px;
  border-width: 1px 0; 
}
.ajax_cart ul.items {
  list-style-type: none;
  margin: 0 0 5px 0;
  padding: 10px 0 0 0;
  border: dotted silver 1px;
  border-width: 1px 0; 
}
.ajax_cart ul.items li {
  margin-bottom: 10px; 
}
.ajax_cart .unavailable_notice { 
  display: block; 
  background: #FFFB91; 
}
.ajax_cart ul input {
  width: 20px;
  text-align: center;
  margin-right: 5px;
  border-radius: 3px;
  border: solid gray 1px;
}
.ajax_cart ul h4 {
  overflow: hidden;
  white-space:nowrap;
  width: 156px;
}
.ajax_cart ul strong {
  display: inline-block;
  margin-left: 5px;
  color: black;
}
.left {
  float: left; 
}
.right {
  float: right;
}
.ajax_cart .right {
  min-width: 56px;
}
.ajax_cart ul li {position: relative;}
.ajax_cart ul .remove { 
  position: absolute;
  top: 0;
  right: -38px;
  width: 16px;
  height: 16px;
  text-indent: -100px;
  overflow: hidden;
  outline: none;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADQ0lEQVQ4jVWTWUxTURCGJ1FAUXywxWjEDROBgjHBpcYH9yd9VNziEkUsCigqCAIFalGh0NIFUErZWkpBDFuBtmwKtoKKDUbBDdS4YYQEE301v+deQ6uTnJxzk3O++eefuUQsfHx8aO26CIo6uI8SLyZQnuImVRsryVhTRVXGCiorLyX5dRnFxkko6sB+2iTeSP7+/kQzjyWxZ0hfVkoNd+upubWJ2m1WMpqqVukNpXaNVmUvLtEGGyr0pCtWU0GhgrJkUoo+fZKEQiFRYKCQ5Dkystk7yNrWKtAbbqda6sy9Nnv7j/HxMQw/c6Oy2jCt0am6s2QZyZqiQoG2uJDSpakUJgr9C5DJs6nMoF/qdDknJqe+4937MYyMvoC2SI1cxXXc6+tBa1sjunrtKCrRTMjkmUFX01O8AGlmOmVmZ0RNTk3i56+fmGL75y+fMPLyBR4PDaDvQS8c3e3o7OlAi7UR5y/GRyWnXGaAMC8gT5ErZrLx1P0Ynz5/ZJDvmPj2FePv3sI9PISe3k6YLUYUKBW4lJQoTrpyyQu4kpJEpppqUqrywcxjl7v4MrjFedDZ7UB5ZRlYJ3BGchoZmWkUl3CWRByA60J8wjm+Xcw81DdYUMcW+4YsJws3mQcJF+KQJk0Fqxvn4mPBZY+RRJOQJefj+IljZK41kaW+Fs2tjeh33cfL1yPocFjZ+R4UylwUapXIviYFy8yVwAM8wQFYdl5Bi7UJzof9/wDuI1+VB/U/gBkFnjh85BDVmI0MUIuWtia4Bh94AM6BfrDhgVqn+k/B8RNHvYCt27ZSgTKf7jTUsX43Y+CRC6/ejPKAwScPoVTnewDnE+MRHXOKduzc7gWEhoXQ3r17fJkPsLa38IA3Y694wJD7EVSaAuhKNJDfkCElLRlsgPxF4SIvYNnyZdy2KOeG/L2jywZHjw3PR4fhHOxjClyorTehylSOolsaSM7GfGB3lwuEglkewELBQgpeHewbEBAQsWv3TjUbbbfZYppmfvy23DH/ZiM9zaS7t2zZrJszd04kuz8vcKaFM3/kipUrSLxZTBs2bpgdHiGaH7k+UrB4yWIuloSGhgSuCVmzgE2eryg8jIKClpKfnx//9g+JqezzWLFjjAAAAABJRU5ErkJggg==);
  background-position: left top;
  background-repeat: no-repeat;
  padding: 0 10px;
}
.ajax_cart .totals {
  margin-top: 10px;
  font-weight: bold; 
}
.ajax_cart .totals .right {
  color: black;
}
.ajax_cart form input {
  width: 239px;
  font-size: 1.2em;
}
.ajax_cart .totals {
  font-size: 14px;
  margin: 0 0 1em 0; 
}
.ajax_cart .totals strike { color: gray; }

/* Cart promotion */
.ajax_cart .promo {
  padding: 10px 0; 
}
.ajax_cart .invalid_promo {
  padding: 5px;
  margin-top: 10px;
  color: black;
  background: #FFFB91;
}
.ajax_cart ul.promo_errors {
  margin-left: 1.5em;
}
.ajax_cart .promo h5 {
  font-size: 1em;
}
</style>

{{ 'http://js.bootic.net/cart/0.0/bootic_cart.min.js' | javascript_tag }}

<script type="text/html" data-template="cart">
  <small class="loading">cargando&hellip;</small>
  <h3>
    <a href="#cart_detail" data-behaviour="toggle">{{ 'titles.cart' | t }} (%{ units })</a> 
    <span class="mobile_only">%{ formatted_total }</span>
  </h3>
  <div id="cart_detail" class="desktop_only">
    %{hasProducts}
    <ul class="items" id="cart_items">
       %{products}
       <li id="citem_%{ id }" class="clearfix" title="(%{ variant_title }) %{ model }">
         <input type="text" class="units left" value="%{ quantity }" size="2" name="quantity" data-update="%{ variant_id }" data-behaviour="numberInputs" />
         <h4 class="left">(%{ variant_title }) %{ model }</h4>  
         <strong class="price right">%{ formatted_price }</strong>
         <a href="#" class="remove" data-remove="%{ variant_id }" title="{{ 'js_cart.title_remove' | t }}">-</a>
         %{unavailable}
         <span class="unavailable_notice">{{ 'js_cart.unavailable' | t }}</span>
         %{/unavailable}
       </li>
       %{/products}
    </ul>
    
    %{hasPromotion}
    <div class="promo">
      <div class="clearfix">
        <span class="left">{{ 'js_cart.discount' | t }} "%{ promotion.name}"</span>
        %{validPromotion}
         <strong class="right">- %{promotion.formatted_discount_total}</strong>
        %{/validPromotion}
      </div>
      
      %{validPromotion}
        %{promotion.free_shipping}
        <p class="free_shipping">
          {{ 'js_cart.free_shipping' | t }}
        </p>
        %{/promotion.free_shipping}
      %{/validPromotion}
      
      %{invalidPromotion}
        <div class="invalid_promo">
          <h5>{{ 'js_cart.non_applicable' | t }}:</h5>
          <ul class="promo_errors">
           %{promotion.errors}
            <li>%{error}</li> 
           %{/promotion.errors}
          </ul> 
        </div>
      %{/invalidPromotion}
    </div>
    
    %{/hasPromotion}

    <div class="totals clearfix">
      <span class="left">Subtotal:</span> 
      <strong class="right">
        %{validPromotion}
        <strike>%{formatted_net_total}</strike>
        %{/validPromotion}
        %{ formatted_total }
      </strong>
    </div>
    
    <form action="/cart" method="post">
      <input type="hidden" name="_method" value="put" />
      <input type="submit" name="cart_action" class="checkout bootic_button" value="{{ 'js_cart.purchase' | t }} »" />
    </form>
    %{/hasProducts}
    %{isEmpty}
    <p class="no_items">
       {{ 'js_cart.empty_cart' | t }}.
    </p>
    %{/isEmpty}
  </div>
</script>

<script type="application/javascript">
// Bootic Ajax cart widget
// This function gets passed an instance of the Bootic.Cart class
// https://github.com/bootic/bootic_cart
// Ismael Celis 2012 for Bootic.net
// -----------------------------------------------------*/
;(function ($, cart, cartSelector) {
  
  function loading () {
    $('.loading', cartSelector).show()  
  }
  
  // Listen to cart events
  cart
    .bind('loading', loading)
    .bind('adding', loading)
    .bind('removing', loading)
    .bind('updated', function () {
      
      $(cartSelector).booticTemplateRender('cart', cart)
      $('.loading', cartSelector).fadeOut()
      $(cartSelector).slideDown('fast')
    })
    .bind('removing', function (evt, item) {
      $('#citem_'+item.product_id, cartSelector).remove()
    })
    .bind('error', function (evt, error) {
      throw error
    })
  
  /* On DOM ready
  ------------------------------*/
  $(function (){
    // Load the cart
    cart.load()
    // Remove-from-cart links
    $(cartSelector).on('click', 'a[data-remove]', function () {
      Bootic.Cart.remove($(this).data('remove'))    
      return false;
    })
    
    // Update quantities
    $(cartSelector).on('blur submit.bootic', 'li input[data-update]', function () {
      var $e = $(this),
          fieldName = $e.attr('name'),
          value = $e.val(),
          variantId = $e.data('update'),
          opts = {};
       
      opts[fieldName] = value;
      cart.add(variantId, null, opts)
    })
    
  })
    
})(jQuery, Bootic.Cart, 'div#ajax_cart')

</script>
